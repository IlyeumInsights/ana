

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Knowledge Package &mdash; ANA 0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Preparation Package" href="preparation.html" />
    <link rel="prev" title="Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ANA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process.html">ANA Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code.html">Project Structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Knowledge Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-rulesmanager">Module RulesManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-dataacquisition">Module DataAcquisition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-dbmanager">Module DbManager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="preparation.html">Preparation Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="training.html">Training Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">Evaluation Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils Package</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ANA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference</a> &raquo;</li>
        
      <li>Knowledge Package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/knowledge.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ana.knowledge.RulesManager">
<span id="knowledge-package"></span><h1>Knowledge Package<a class="headerlink" href="#module-ana.knowledge.RulesManager" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-rulesmanager">
<h2>Module RulesManager<a class="headerlink" href="#module-rulesmanager" title="Permalink to this headline">¶</a></h2>
<p>Load rules as dictionnary and analyze them (it does no evaluate them for now).
Rule based evaluation, based on a KB, is a perspective.</p>
<dl class="simple">
<dt>Class</dt><dd><p>RulesManager</p>
</dd>
</dl>
<dl class="class">
<dt id="ana.knowledge.RulesManager.RulesManager">
<em class="property">class </em><code class="sig-prename descclassname">ana.knowledge.RulesManager.</code><code class="sig-name descname">RulesManager</code><span class="sig-paren">(</span><em class="sig-param">rulesPath='knowledge\rules\policies.swrl'</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.RulesManager.RulesManager" title="Permalink to this definition">¶</a></dt>
<dd><p>class RulesManager</p>
<p>Load a set of SWRL rules that represent policies, and analyzes them.
Rules are stored in a file provided (path) to the constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rules</strong> (<em>dict</em><em>(</em><em>str</em><em>, </em><em>str</em><em>)</em>) – The set of rules reprensented as dictionnary that associates
identifier (policy name) to an actual rule.</p>
</dd>
</dl>
<dl class="method">
<dt id="ana.knowledge.RulesManager.RulesManager.gatherClass">
<code class="sig-name descname">gatherClass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.RulesManager.RulesManager.gatherClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather the classes mentionned in the rules</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The classes indentified in the rules.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ana.knowledge.RulesManager.RulesManager.getPoliticsOfClass">
<code class="sig-name descname">getPoliticsOfClass</code><span class="sig-paren">(</span><em class="sig-param">clauseType</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.RulesManager.RulesManager.getPoliticsOfClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather the policies related to one clause type according to the rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>clauseType</strong> (<em>str</em>) – Type of clause.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Policies related to the given clause type</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ana.knowledge.RulesManager.RulesManager.loadRules">
<code class="sig-name descname">loadRules</code><span class="sig-paren">(</span><em class="sig-param">rulesPath</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.RulesManager.RulesManager.loadRules" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a set of rules from a SWRL file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rulesPath</strong> (<em>str</em><em> (</em><em>filePath</em><em>)</em>) – Path to the SWRL file.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ana.knowledge.RulesManager.RulesManager.politicAppliesToSentence">
<code class="sig-name descname">politicAppliesToSentence</code><span class="sig-paren">(</span><em class="sig-param">politic</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.RulesManager.RulesManager.politicAppliesToSentence" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert if a politic can be applied to a sentence or a complete clause.
If true, classifier can be applied on sentences extraced from clause.
To evaluate this assertion, rules predicate are reviewed.
For now, predicate compatible with sentences are hard coded
By default: False</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>politic</strong> (<em>str</em>) – Policy to check. (TODO rename)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True is the policy applies to a sentence, False if it applies
to a full clause, defaults to False.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<p><strong>WIP or Not Used</strong></p>
<span class="target" id="module-ana.knowledge.DataAcquisition"></span><div class="section" id="module-dataacquisition">
<h2>Module DataAcquisition<a class="headerlink" href="#module-dataacquisition" title="Permalink to this headline">¶</a></h2>
<p>Acquires annotated texts (raw or json), stores them in a db and generates
dataset for the learning phase.
WIP</p>
<dl class="field-list simple">
<dt class="field-odd">Authors</dt>
<dd class="field-odd"><p>Nathan Ramoly</p>
</dd>
</dl>
<dl class="class">
<dt id="ana.knowledge.DataAcquisition.DocumentAcquisitor">
<em class="property">class </em><code class="sig-prename descclassname">ana.knowledge.DataAcquisition.</code><code class="sig-name descname">DocumentAcquisitor</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">name</em>, <em class="sig-param">description=None</em>, <em class="sig-param">version=None</em>, <em class="sig-param">date=datetime.datetime(2020</em>, <em class="sig-param">2</em>, <em class="sig-param">4</em>, <em class="sig-param">16</em>, <em class="sig-param">20</em>, <em class="sig-param">20</em>, <em class="sig-param">77101)</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DataAcquisition.DocumentAcquisitor" title="Permalink to this definition">¶</a></dt>
<dd><p>class DocumentAcquisitor</p>
<p>Incrementaly create a JSON annotated documents instance by going through
subparts (clause, sentence).
Created JSON structure (wip):</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    parentDocument: uuid
    version: version of the current instance of contracts (?)
    date: date of the upload or insertion (if not provided)
    content:
    {
        level1:
        [{
            _id:
            level: ?
            parentText: id
            position: position in parent text (offset)
            text: string
            annotations:
            {
                dimension1: annotation1
                ...
                dimensionN: annotationN
            }
        }]
        level2:
        [{
            ...
        }]
    }
}
</pre></div>
</div>
<dl class="method">
<dt id="ana.knowledge.DataAcquisition.DocumentAcquisitor.addAnnotatedSubtext">
<code class="sig-name descname">addAnnotatedSubtext</code><span class="sig-paren">(</span><em class="sig-param">text</em>, <em class="sig-param">level</em>, <em class="sig-param">annotation</em>, <em class="sig-param">id=UUID('de242cb6-fe48-4ed0-a9fa-b13c81b88025')</em>, <em class="sig-param">parentText=None</em>, <em class="sig-param">position=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DataAcquisition.DocumentAcquisitor.addAnnotatedSubtext" title="Permalink to this definition">¶</a></dt>
<dd><p>id is an uuid or a given string (“clause1”)
Annotation is a dict {dimensions:annotations} (ex {type:pay, anom:R4})</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ana.knowledge.DataAcquisition.acquireJSONContract">
<code class="sig-prename descclassname">ana.knowledge.DataAcquisition.</code><code class="sig-name descname">acquireJSONContract</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">jsoncontract</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DataAcquisition.acquireJSONContract" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquires an instance (version) of a contract as a JSON, stores in in db
according to matching domain (ilyeum, eula, etc.) and parent contract
(a contract have serveral instances/versions during negotiation).</p>
<p>TODO Check previous contract similarity</p>
</dd></dl>

<dl class="function">
<dt id="ana.knowledge.DataAcquisition.createNewDocument">
<code class="sig-prename descclassname">ana.knowledge.DataAcquisition.</code><code class="sig-name descname">createNewDocument</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">description</em>, <em class="sig-param">author</em>, <em class="sig-param">client</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DataAcquisition.createNewDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new document/contract as a json format
Format:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    _id: uuid
    name: string
    description: string
    author: string
    client: string
}
</pre></div>
</div>
</dd></dl>

</div>
<span class="target" id="module-ana.knowledge.DbManager"></span><div class="section" id="module-dbmanager">
<h2>Module DbManager<a class="headerlink" href="#module-dbmanager" title="Permalink to this headline">¶</a></h2>
<p>Module in charges of storing the acquired annotated data in a database.
For now: MongoDB
WIP</p>
<dl class="function">
<dt id="ana.knowledge.DbManager.addDocumentInCollection">
<code class="sig-prename descclassname">ana.knowledge.DbManager.</code><code class="sig-name descname">addDocumentInCollection</code><span class="sig-paren">(</span><em class="sig-param">dbName</em>, <em class="sig-param">collection</em>, <em class="sig-param">jsonContent</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DbManager.addDocumentInCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a document/contract (in JSON) in a collection in a database in MongoDB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dbName</strong> (<em>str</em>) – Name of the database  to use in MongoDB.</p></li>
<li><p><strong>collection</strong> (<em>str</em>) – Collection to add the content.</p></li>
<li><p><strong>jsonContent</strong> (<em>json</em>) – Content to insert in the db.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ana.knowledge.DbManager.createTextDocument">
<code class="sig-prename descclassname">ana.knowledge.DbManager.</code><code class="sig-name descname">createTextDocument</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">jsonContractInfo</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DbManager.createTextDocument" title="Permalink to this definition">¶</a></dt>
<dd><p>storeDocInstance</p>
<p>Create a new document/contrac.
Stores meta-information about a contract that are independent from
its changing contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain</strong> (<em>str</em>) – Name of the the domain considered, such as Ilyeum contract,
EULA, etc., this domain matches a dedicated db in MongoDB?</p></li>
<li><p><strong>jsonContractInfo</strong> (<em>json</em>) – Information about the document to insert in the db.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ana.knowledge.DbManager.storeDocInstance">
<code class="sig-prename descclassname">ana.knowledge.DbManager.</code><code class="sig-name descname">storeDocInstance</code><span class="sig-paren">(</span><em class="sig-param">domain</em>, <em class="sig-param">jsonContractContent</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.knowledge.DbManager.storeDocInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores an instance (version) of a document in the databse.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>domain</strong> (<em>str</em>) – Name of the the domain considered, such as Ilyeum contract,
EULA, etc., this domain matches a dedicated db in MongoDB?</p></li>
<li><p><strong>jsonContractContent</strong> (<em>json</em>) – Content to insert in the db.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="preparation.html" class="btn btn-neutral float-right" title="Preparation Package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Iyeum

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>