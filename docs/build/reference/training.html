

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Training Package &mdash; ANA 0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Evaluation Package" href="evaluation.html" />
    <link rel="prev" title="Preparation Package" href="preparation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ANA
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process.html">ANA Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code.html">Project Structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="knowledge.html">Knowledge Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="preparation.html">Preparation Package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Training Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-compositeclassifier">Module CompositeClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-globaltraining">Module GlobalTraining</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-pipelinetraining">Module PipelineTraining</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">Evaluation Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils Package</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ANA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference</a> &raquo;</li>
        
      <li>Training Package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/training.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ana.training.CompositeClassifier">
<span id="training-package"></span><h1>Training Package<a class="headerlink" href="#module-ana.training.CompositeClassifier" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-compositeclassifier">
<h2>Module CompositeClassifier<a class="headerlink" href="#module-compositeclassifier" title="Permalink to this headline">¶</a></h2>
<p>Module created in an effort to simplify the structure of the code.
Work in progress. (Currently not used)</p>
<dl class="simple">
<dt>Class:</dt><dd><p>CompositeClassifier: Classifier composed of several complementary
subclassifiers.</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>use composite classifier for all case (would match ensemble classifier)</p>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Move in a suitable package</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Authors</dt>
<dd class="field-odd"><p>Nathan Ramoly</p>
</dd>
</dl>
<dl class="class">
<dt id="ana.training.CompositeClassifier.CompositeClassifier">
<em class="property">class </em><code class="sig-prename descclassname">ana.training.CompositeClassifier.</code><code class="sig-name descname">CompositeClassifier</code><span class="sig-paren">(</span><em class="sig-param">models=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.CompositeClassifier.CompositeClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>class CompositeClassifier
aka Reduced Ensemble Classifier</p>
<p>Classifier composed of several complementary subclassifiers.
This classifier is typically a multiclass classifier decomposed in binary
subclassifiers.
Classification is then agregated with all detected class.
For now, agregation is only working for binary subclassifier.</p>
<dl class="method">
<dt id="ana.training.CompositeClassifier.CompositeClassifier.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">y=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.CompositeClassifier.CompositeClassifier.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>fit method
Train all subclassifiers.</p>
</dd></dl>

<dl class="method">
<dt id="ana.training.CompositeClassifier.CompositeClassifier.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">y=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.CompositeClassifier.CompositeClassifier.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>predict method
Evaluate X from all classifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Classification for each value in X.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ana.training.CompositeClassifier.CompositeClassifier.score">
<code class="sig-name descname">score</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">y=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.CompositeClassifier.CompositeClassifier.score" title="Permalink to this definition">¶</a></dt>
<dd><p>score method
..todo:</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-ana.training.GlobalTraining"></span><div class="section" id="module-globaltraining">
<h2>Module GlobalTraining<a class="headerlink" href="#module-globaltraining" title="Permalink to this headline">¶</a></h2>
<p>Generate all pipelines for all three phases and all anomomalies
through an AutoML like approach directed by rules (politics).
Three phases:
- Classification of clause per (relevant) type
- Prediction of anomaly
- Classification of detected anomaly
It uses the policies as logic rules to orient the learning.</p>
<dl class="simple">
<dt>Functions</dt><dd><p>generatePhaseOnePipeline
generatePhaseTwoPipeline
generatePhaseThreePipeline</p>
</dd>
</dl>
<dl class="function">
<dt id="ana.training.GlobalTraining.generatePhaseOnePipeline">
<code class="sig-prename descclassname">ana.training.GlobalTraining.</code><code class="sig-name descname">generatePhaseOnePipeline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.GlobalTraining.generatePhaseOnePipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine and train the best pipeline for classifiying clauses according
to their types.
It explores several data preparation parameters (feature extraction,
oversamplings) and granulairty.
This pipeline always consider two subclassifiers, each dedicated to a
granularity (sentence and clause).
The pipeline is exported in the model directory.</p>
</dd></dl>

<dl class="function">
<dt id="ana.training.GlobalTraining.generatePhaseThreePipeline">
<code class="sig-prename descclassname">ana.training.GlobalTraining.</code><code class="sig-name descname">generatePhaseThreePipeline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.GlobalTraining.generatePhaseThreePipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine and train the best pipeline for classifying anomalies of clauses
(phase 3). In other words, it aims to determine the violated policies of
an anomalous clause.
It explores several data preparation parameters (feature extraction,
oversamplings) and granulairty.
This pipeline always consider several subclassifiers combinations.
The pipeline is exported in the model directory.</p>
</dd></dl>

<dl class="function">
<dt id="ana.training.GlobalTraining.generatePhaseTwoPipeline">
<code class="sig-prename descclassname">ana.training.GlobalTraining.</code><code class="sig-name descname">generatePhaseTwoPipeline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.GlobalTraining.generatePhaseTwoPipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine and train the best pipeline for detecting anomalies in clauses
(phase 2).
It explores several data preparation parameters (feature extraction,
oversamplings) and granulairty.
This pipeline always consider several subclassifiers combinations.
The pipeline is exported in the model directory.</p>
</dd></dl>

</div>
<span class="target" id="module-ana.training.PipelineTraining"></span><div class="section" id="module-pipelinetraining">
<h2>Module PipelineTraining<a class="headerlink" href="#module-pipelinetraining" title="Permalink to this headline">¶</a></h2>
<p>Train several pipelines according to multiple provided configurations.
That is to say that it trains a possible ensemble classifier.
.. todo:: Use MLflow to track the model trained.</p>
<dl class="function">
<dt id="ana.training.PipelineTraining.evaluatePipeline">
<code class="sig-prename descclassname">ana.training.PipelineTraining.</code><code class="sig-name descname">evaluatePipeline</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">nbconf</em>, <em class="sig-param">config</em>, <em class="sig-param">voteSent=None</em>, <em class="sig-param">voteClause=None</em>, <em class="sig-param">voteMode=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.PipelineTraining.evaluatePipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the quality of classification of a pipeline by loading a part of
the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em><em> (</em><em>dirPath</em><em>)</em>) – Directory containing the models of the pipeline.</p></li>
<li><p><strong>nbconf</strong> (<em>int</em>) – Number of configurations considered.</p></li>
<li><p><strong>config</strong> (<em>list</em><em>(</em><em>any</em><em>)</em>) – Configurations, contraining information to load the dataset.</p></li>
<li><p><strong>voteSent</strong> (<em>str</em><em>, </em><em>optional</em>) – Default election element at sentence level,
defaults to None</p></li>
<li><p><strong>voteClause</strong> (<em>str</em><em>, </em><em>optional</em>) – Default election element at clause level,
defaults to None</p></li>
<li><p><strong>voteMode</strong> (<em>str</em><em>, </em><em>optional</em>) – Type of election performed on clause (to aggregate
outputs of models), defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Achieved f1_score</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Expected values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Predicted values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ana.training.PipelineTraining.evaluatePipelineDebug">
<code class="sig-prename descclassname">ana.training.PipelineTraining.</code><code class="sig-name descname">evaluatePipelineDebug</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">nbconf</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.PipelineTraining.evaluatePipelineDebug" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipeline evaluation for ML conception and debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em><em> (</em><em>dirPath</em><em>)</em>) – Directory containing the models of the pipeline.</p></li>
<li><p><strong>nbconf</strong> (<em>int</em>) – Number of configurations considered.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Achieved f1_score</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ana.training.PipelineTraining.generateClassifReport">
<code class="sig-prename descclassname">ana.training.PipelineTraining.</code><code class="sig-name descname">generateClassifReport</code><span class="sig-paren">(</span><em class="sig-param">y_test</em>, <em class="sig-param">y_pred</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.PipelineTraining.generateClassifReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a report of the classifier performance based on its outputs and
reference (test) labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y_test</strong> (<em>np.array</em>) – Expected labels.</p></li>
<li><p><strong>y_pred</strong> (<em>np.array</em>) – Predicted labels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The human readable report.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ana.training.PipelineTraining.trainClassifier">
<code class="sig-prename descclassname">ana.training.PipelineTraining.</code><code class="sig-name descname">trainClassifier</code><span class="sig-paren">(</span><em class="sig-param">config</em>, <em class="sig-param">path</em>, <em class="sig-param">classifierName</em>, <em class="sig-param">automl=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.PipelineTraining.trainClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Trains a classifier for a single configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>list</em><em>(</em><em>any</em><em>)</em>) – Classifier configuration</p></li>
<li><p><strong>path</strong> (<em>str</em><em> (</em><em>dirPath</em><em>)</em>) – Location of classifier export.</p></li>
<li><p><strong>classifierName</strong> (<em>str</em>) – Name of the classifier that will be used to name the
exported file.</p></li>
<li><p><strong>automl</strong> (<em>bool</em><em>, </em><em>optional</em>) – Assert if single model AutoML (TPOT) should be used, 
defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The trained model</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>sklearn.model</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ana.training.PipelineTraining.trainPipeline">
<code class="sig-prename descclassname">ana.training.PipelineTraining.</code><code class="sig-name descname">trainPipeline</code><span class="sig-paren">(</span><em class="sig-param">configs</em>, <em class="sig-param">path</em>, <em class="sig-param">automl=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ana.training.PipelineTraining.trainPipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate multiple classifier as part of the pipeline as well as voting
procedure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> (<em>list</em><em>(</em><em>list</em><em>(</em><em>any</em><em>)</em><em>)</em>) – Configurations of all subclassifiers</p></li>
<li><p><strong>path</strong> (<em>str</em><em> (</em><em>dirPath</em><em>)</em>) – Destination for the export of models</p></li>
<li><p><strong>automl</strong> (<em>bool</em><em>, </em><em>optional</em>) – Assert if AutoML should be used, defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="evaluation.html" class="btn btn-neutral float-right" title="Evaluation Package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="preparation.html" class="btn btn-neutral float-left" title="Preparation Package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Iyeum

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>